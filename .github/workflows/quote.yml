name: âœ¨ Auto Update Daily Quote

on:
  schedule:
    - cron: "0 0 * * *"
  workflow_dispatch:

permissions:
  contents: write

jobs:
  update-quote:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Generate daily quote
        run: |
          quotes=(
            "\"The only limit to our realization of tomorrow is our doubts of today.\" â€“ Franklin D. Roosevelt"
            "\"In the middle of difficulty lies opportunity.\" â€“ Albert Einstein"
            "\"Be yourself; everyone else is already taken.\" â€“ Oscar Wilde"
            "\"Every scar is proof that you survived.\" â€“ Unknown"
            "\"Focus on progress, not perfection.\" â€“ Unknown"
            "\"Quiet minds create loud impacts.\" â€“ Unknown"
            "\"The darkest nights produce the brightest stars.\" â€“ Unknown"
            "\"You donâ€™t need to be loud to be strong.\" â€“ Unknown"
            "\"Donâ€™t count the days, make the days count.\" â€“ Muhammad Ali"
            "\"Be kind, for everyone you meet is fighting a hard battle.\" â€“ Plato"
            "\"Dream big. Start small. Act now.\" â€“ Robin Sharma"
            "\"Do what you can, with what you have, where you are.\" â€“ Theodore Roosevelt"
            "\"The more I read, the more I acquire, the more certain I am that I know nothing.\" â€“ Voltaire"
            "\"Happiness is not something ready made. It comes from your own actions.\" â€“ Dalai Lama"
            "\"A person who never made a mistake never tried anything new.\" â€“ Albert Einstein"
            "\"Life isnâ€™t about finding yourself. Itâ€™s about creating yourself.\" â€“ George Bernard Shaw"
            "\"It always seems impossible until itâ€™s done.\" â€“ Nelson Mandela"
            "\"I donâ€™t care that they stole my ideaâ€¦ I care that they donâ€™t have any of their own.\" â€“ Nikola Tesla"
            "\"The present is theirs; the future, for which I really worked, is mine.\" â€“ Nikola Tesla"
            "\"You are never too old to set another goal or to dream a new dream.\" â€“ C.S. Lewis"
          )
          random_quote=${quotes[$RANDOM % ${#quotes[@]}]}
          echo "> $random_quote" > quote.txt

      - name: Update README with quote
        run: |
          # Pastikan file README.md ada
          if [ ! -f README.md ]; then
            echo "README.md not found!"
            exit 1
          fi

          # Ganti isi antara tag <!--START_QUOTE--> dan <!--END_QUOTE-->
          awk -v q="$(cat quote.txt)" '
            /<!--START_QUOTE-->/ {print; getline; print q; next}
            /<!--END_QUOTE-->/ {print; next}
            {print}
          ' README.md > temp && mv temp README.md

      - name: Commit & push
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add README.md
          git commit -m "ðŸª¶ update daily quote"
          git push
